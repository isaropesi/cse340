<% if (title) { %>
    <h1>
        <%= title %>
    </h1>
    <% } else { res.locals.title="Delete Review" } %>

        <%- messages() %>

            <div class="delete-review-container">
                <p class="warning-message">⚠️ Are you sure you want to delete this review? This action cannot be undone.
                </p>

                <div class="review-preview">
                    <h3>Review for: <strong>
                            <%= vehicleName %>
                        </strong></h3>

                    <div class="rating-display">
                        <strong>Rating:</strong>
                        <span class="stars">
                            <% for(let i=1; i <=5; i++) { %>
                                <span class="star <%= i <= review_rating ? 'filled' : '' %>">★</span>
                                <% } %>
                        </span>
                        (<%= review_rating %>/5)
                    </div>

                    <div class="review-text-display">
                        <strong>Your Review:</strong>
                        <p>
                            <%= review_text %>
                        </p>
                    </div>
                </div>

                <form action="/review/delete" method="post" id="deleteReviewForm">
                    <input type="hidden" name="review_id" value="<%= review_id %>">
                    <input type="hidden" name="inv_id" value="<%= inv_id %>">

                    <button type="submit" class="delete-btn">Yes, Delete Review</button>
                    <a href="/inv/detail/<%= inv_id %>" class="cancel-btn">No, Keep Review</a>
                </form>
            </div>

            <style>
                .delete-review-container {
                    max-width: 600px;
                    margin: 2rem auto;
                    padding: 2rem;
                    background: #f9f9f9;
                    border-radius: 8px;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }

                .warning-message {
                    background-color: #fff3cd;
                    border: 2px solid #ffc107;
                    border-radius: 4px;
                    padding: 1rem;
                    margin-bottom: 1.5rem;
                    color: #856404;
                    font-weight: 600;
                    text-align: center;
                }

                .review-preview {
                    background: white;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                }

                .review-preview h3 {
                    margin-top: 0;
                    margin-bottom: 1rem;
                    color: #333;
                }

                .rating-display {
                    margin-bottom: 1rem;
                }

                .stars {
                    display: inline-block;
                    margin-left: 0.5rem;
                }

                .star {
                    color: #ddd;
                    font-size: 1.25rem;
                }

                .star.filled {
                    color: #ffc107;
                }

                .review-text-display {
                    margin-top: 1rem;
                }

                .review-text-display p {
                    background: #f5f5f5;
                    padding: 1rem;
                    border-radius: 4px;
                    margin-top: 0.5rem;
                    line-height: 1.6;
                }

                .delete-btn,
                .cancel-btn {
                    display: inline-block;
                    margin-top: 1rem;
                    margin-right: 1rem;
                    padding: 0.75rem 2rem;
                    border: none;
                    border-radius: 4px;
                    font-size: 1rem;
                    font-weight: 600;
                    cursor: pointer;
                    text-decoration: none;
                    transition: background-color 0.2s;
                }

                .delete-btn {
                    background-color: #f44336;
                    color: white;
                }

                .delete-btn:hover {
                    background-color: #d32f2f;
                }

                .cancel-btn {
                    background-color: #4CAF50;
                    color: white;
                }

                .cancel-btn:hover {
                    background-color: #45a049;
                }
            </style>

            <script>
                // Confirmation before deletion
                document.getElementById('deleteReviewForm').addEventListener('submit', function (e) {
                    if (!confirm('Are you absolutely sure you want to delete this review? This cannot be undone.')) {
                        e.preventDefault();
                    }
                });
            </script>